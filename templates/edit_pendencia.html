<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Editar Demanda</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <div class="header-actions">
            <h1>Editar Demanda</h1>
            <div class="actions-group">
                <a href="{{ url_for('pendencias', **args) }}" class="button">Voltar para a Lista</a>
            </div>
        </div>
        
        <form method="post">
            {% for key, value in args.items() %}
                <input type="hidden" name="{{ key }}" value="{{ value }}">
            {% endfor %}

            <label for="protocolo">Protocolo</label>
            <input type="number" id="protocolo" name="protocolo" value="{{ pendencia.protocolo }}">
            
            <label for="data_registro">Data de Registro</label>
            <input type="date" id="data_registro" name="data_registro" value="{{ pendencia.data_registro }}" required>
            
            <label for="cliente">Cliente</label>
            <select id="cliente" name="cliente" required>
                {% for cliente in clientes %}
                    <option value="{{ cliente }}" {% if cliente == pendencia.cliente %}selected{% endif %}>{{ cliente }}</option>
                {% endfor %}
            </select>
            
            <label for="sistema">Sistema</label>
            <select id="sistema" name="sistema" required>
                {% for sistema in sistemas %}
                    <option value="{{ sistema }}" {% if sistema == pendencia.sistema %}selected{% endif %}>{{ sistema }}</option>
                {% endfor %}
            </select>
            
            <label for="detalhamento">Detalhamento</label>
            <textarea id="detalhamento" name="detalhamento" rows="5">{{ pendencia.detalhamento }}</textarea>

            <label for="responsavel">Responsável</label>
            <select id="responsavel" name="responsavel">
                <option value="">Nenhum</option>
                {% for responsavel in responsaveis %}
                    <option value="{{ responsavel }}" {% if responsavel == pendencia.responsavel %}selected{% endif %}>{{ responsavel }}</option>
                {% endfor %}
            </select>

            <label for="fase">Fase</label>
            <select id="fase" name="fase">
                <option value="Teste de entrada" {% if pendencia.fase == 'Teste de entrada' %}selected{% endif %}>Teste de entrada</option>
                <option value="Gerente Dev" {% if pendencia.fase == 'Gerente Dev' %}selected{% endif %}>Gerente Dev</option>
                <option value="Analista" {% if pendencia.fase == 'Analista' %}selected{% endif %}>Analista</option>
                <option value="Dev responsável" {% if pendencia.fase == 'Dev responsável' %}selected{% endif %}>Dev responsável</option>
                <option value="Teste de saída" {% if pendencia.fase == 'Teste de saída' %}selected{% endif %}>Teste de saída</option>
                <option value="Aguardando atualização" {% if pendencia.fase == 'Aguardando atualização' %}selected{% endif %}>Aguardando atualização</option>
                <option value="Feedback ao cliente" {% if pendencia.fase == 'Feedback ao cliente' %}selected{% endif %}>Feedback ao cliente</option>
                <option value="Retrabalho" {% if pendencia.fase == 'Retrabalho' %}selected{% endif %}>Retrabalho</option>
            </select>

            <label for="status">Status</label>
            <select id="status" name="status">
                <option value="Pendente" {% if pendencia.status == 'Pendente' %}selected{% endif %}>Pendente</option>
                <option value="Concluído não arquivado" {% if pendencia.status == 'Concluído não arquivado' %}selected{% endif %}>Concluído não arquivado</option>
                <option value="Arquivado" {% if pendencia.status == 'Arquivado' %}selected{% endif %}>Arquivado</option>
            </select>
            
            <button type="submit" class="button edit">Atualizar Demanda</button>
        </form>
    </div>
</body>
</html>